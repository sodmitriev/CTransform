<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CTransform: controller Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CTransform
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="structcontroller-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">controller Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Objects of this class are used to maintain the transformation process.  
 <a href="structcontroller.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="controller_8h_source.html">controller.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a234aa9f2a8a767562191fdd825f90357"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcontroller.html#a234aa9f2a8a767562191fdd825f90357">controller_constructor</a> (<a class="el" href="structcontroller.html">controller</a> *this)</td></tr>
<tr class="memdesc:a234aa9f2a8a767562191fdd825f90357"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes "this" controller.  <a href="structcontroller.html#a234aa9f2a8a767562191fdd825f90357">More...</a><br /></td></tr>
<tr class="separator:a234aa9f2a8a767562191fdd825f90357"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6c7efe159c91333b704272de64065c8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcontroller.html#ad6c7efe159c91333b704272de64065c8">controller_destructor</a> (<a class="el" href="structcontroller.html">controller</a> *this)</td></tr>
<tr class="memdesc:ad6c7efe159c91333b704272de64065c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroys "this" controller.  <a href="structcontroller.html#ad6c7efe159c91333b704272de64065c8">More...</a><br /></td></tr>
<tr class="separator:ad6c7efe159c91333b704272de64065c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6f5a6ede5df13988faa6691d5c6e7a2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcontroller.html#af6f5a6ede5df13988faa6691d5c6e7a2">controller_add_transformation</a> (<a class="el" href="structtransformation.html">transformation</a> *transform, <a class="el" href="structcontroller.html">controller</a> *this)</td></tr>
<tr class="memdesc:af6f5a6ede5df13988faa6691d5c6e7a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a transformation to the end of controller's transformation chain.  <a href="structcontroller.html#af6f5a6ede5df13988faa6691d5c6e7a2">More...</a><br /></td></tr>
<tr class="separator:af6f5a6ede5df13988faa6691d5c6e7a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4dd5793dcab8ee2fedba73c002215a0d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcontroller.html#a4dd5793dcab8ee2fedba73c002215a0d">controller_set_source</a> (<a class="el" href="structsource.html">source</a> *in, <a class="el" href="structcontroller.html">controller</a> *this)</td></tr>
<tr class="memdesc:a4dd5793dcab8ee2fedba73c002215a0d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets data source of a controller.  <a href="structcontroller.html#a4dd5793dcab8ee2fedba73c002215a0d">More...</a><br /></td></tr>
<tr class="separator:a4dd5793dcab8ee2fedba73c002215a0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a977f95f1fcc10bd881f3b5d1e4a4e6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcontroller.html#a6a977f95f1fcc10bd881f3b5d1e4a4e6">controller_set_sink</a> (<a class="el" href="structsink.html">sink</a> *in, <a class="el" href="structcontroller.html">controller</a> *this)</td></tr>
<tr class="memdesc:a6a977f95f1fcc10bd881f3b5d1e4a4e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets data sink of a controller.  <a href="structcontroller.html#a6a977f95f1fcc10bd881f3b5d1e4a4e6">More...</a><br /></td></tr>
<tr class="separator:a6a977f95f1fcc10bd881f3b5d1e4a4e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78debcb43224e24c86bdb0ac72fdeb20"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcontroller.html#a78debcb43224e24c86bdb0ac72fdeb20">controller_work</a> (<a class="el" href="structcontroller.html">controller</a> *this)</td></tr>
<tr class="memdesc:a78debcb43224e24c86bdb0ac72fdeb20"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform a work cycle.  <a href="structcontroller.html#a78debcb43224e24c86bdb0ac72fdeb20">More...</a><br /></td></tr>
<tr class="separator:a78debcb43224e24c86bdb0ac72fdeb20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad40b4841d779853bbaf3254eea8bf464"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcontroller.html#ad40b4841d779853bbaf3254eea8bf464">controller_finalize</a> (<a class="el" href="structcontroller.html">controller</a> *this)</td></tr>
<tr class="memdesc:ad40b4841d779853bbaf3254eea8bf464"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform a work cycle and flush all buffers and transformations.  <a href="structcontroller.html#ad40b4841d779853bbaf3254eea8bf464">More...</a><br /></td></tr>
<tr class="separator:ad40b4841d779853bbaf3254eea8bf464"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b872d9d26cec2bf3d1c24f9abe4bb35"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcontroller.html#a0b872d9d26cec2bf3d1c24f9abe4bb35">controller_get_stage</a> (<a class="el" href="structcontroller.html">controller</a> *this)</td></tr>
<tr class="memdesc:a0b872d9d26cec2bf3d1c24f9abe4bb35"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get current controller stage.  <a href="structcontroller.html#a0b872d9d26cec2bf3d1c24f9abe4bb35">More...</a><br /></td></tr>
<tr class="separator:a0b872d9d26cec2bf3d1c24f9abe4bb35"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Objects of this class are used to maintain the transformation process. </p>
<p>Controller object is used to perform an iterative process of data transformation form <a class="el" href="structsource.html">source</a> to <a class="el" href="structsink.html">sink</a>.</p>
<h1><a class="anchor" id="Structure"></a>
Structure</h1>
<p>Controller object includes a data <a class="el" href="structsource.html">source</a> (object that sends data to the controller system), a data <a class="el" href="structsink.html">sink</a> (object that receives transformed data from controller system). In between source and sink zero, one ore more sequent transformations may be inserted (of <a class="el" href="structtransformation.html">transformation</a> type). A buffer is added between each two elements of the system (i.e. between source and first transformation, between each two adjacent transformations and between last transformation and sink).</p>
<p>A final process may look like this:</p>
<p>[source] -&gt; [buffer] -&gt; [transformation 0] -&gt; [buffer] -&gt; ... -&gt; [transformation N] -&gt; [buffer] -&gt; [sink]</p>
<p>Or, in an extreme case, like this:</p>
<p>[source] -&gt; [buffer] -&gt; [sink]</p>
<p>Controller takes input data from source, applies a chain of transformations to this data, and sends the processed data to sink. Transformations are applied in the same order they are added and may not be replaced after adding. Source and sink may be replaced after setting in order to implement stream concatenation or batch processing.</p>
<h1><a class="anchor" id="Stages"></a>
Stages</h1>
<p>Controller object has 4 sequent stages: <a class="el" href="structcontroller.html#build">build</a>, <a class="el" href="structcontroller.html#work">work</a>, <a class="el" href="structcontroller.html#final">final</a> and <a class="el" href="structcontroller.html#done">done</a>. Each stage has a corresponding value in <a class="el" href="controller_8h.html#af1ed5fffb153c6d6b693d5402a1854bd">controller_stage</a> enum</p>
<h2><a class="anchor" id="build"></a>
build</h2>
<p>Build stage lasts from invocation of <a class="el" href="structcontroller.html#a234aa9f2a8a767562191fdd825f90357" title="Initializes &quot;this&quot; controller.">controller_constructor(controller *)</a> until first invocation of <a class="el" href="structcontroller.html#a78debcb43224e24c86bdb0ac72fdeb20" title="Perform a work cycle.">controller_work(controller *)</a></p>
<p>During this stage, controller must be supplied with a source, sink and a desired set of transformations</p>
<p>The following methods can be called during this stage:</p><ul>
<li><a class="el" href="structcontroller.html#af6f5a6ede5df13988faa6691d5c6e7a2" title="Adds a transformation to the end of controller&#39;s transformation chain.">controller_add_transformation(transformation *, controller *)</a></li>
<li><a class="el" href="structcontroller.html#a4dd5793dcab8ee2fedba73c002215a0d" title="Sets data source of a controller.">controller_set_source(source *, controller *)</a></li>
<li><a class="el" href="structcontroller.html#a6a977f95f1fcc10bd881f3b5d1e4a4e6" title="Sets data sink of a controller.">controller_set_sink(sink *, controller *)</a></li>
<li><a class="el" href="structcontroller.html#a78debcb43224e24c86bdb0ac72fdeb20" title="Perform a work cycle.">controller_work(controller *)</a> (advances controller to the <a class="el" href="structcontroller.html#work">work</a> stage)</li>
<li><a class="el" href="structcontroller.html#ad40b4841d779853bbaf3254eea8bf464" title="Perform a work cycle and flush all buffers and transformations.">controller_finalize(controller *)</a> (advances controller to the <a class="el" href="structcontroller.html#final">final</a> or <a class="el" href="structcontroller.html#done">done</a> stage)</li>
<li><a class="el" href="structcontroller.html#a0b872d9d26cec2bf3d1c24f9abe4bb35" title="Get current controller stage.">controller_get_stage(controller *)</a></li>
<li><a class="el" href="structcontroller.html#ad6c7efe159c91333b704272de64065c8" title="Destroys &quot;this&quot; controller.">controller_destructor(controller *)</a></li>
</ul>
<h2><a class="anchor" id="work"></a>
work</h2>
<p>Work stage lasts from first invocation of <a class="el" href="structcontroller.html#a234aa9f2a8a767562191fdd825f90357" title="Initializes &quot;this&quot; controller.">controller_constructor(controller *)</a> until first invocation of <a class="el" href="structcontroller.html#ad40b4841d779853bbaf3254eea8bf464" title="Perform a work cycle and flush all buffers and transformations.">controller_finalize(controller *)</a></p>
<p>During this stage, data from source is partially transformed and sent to the sink. If controller is on this stage, then there is no guarantee that all data is processed, as some of it may be left in the buffers.</p>
<p>The following methods can be called during this stage:</p><ul>
<li><a class="el" href="structcontroller.html#a4dd5793dcab8ee2fedba73c002215a0d" title="Sets data source of a controller.">controller_set_source(source *, controller *)</a></li>
<li><a class="el" href="structcontroller.html#a6a977f95f1fcc10bd881f3b5d1e4a4e6" title="Sets data sink of a controller.">controller_set_sink(sink *, controller *)</a></li>
<li><a class="el" href="structcontroller.html#a78debcb43224e24c86bdb0ac72fdeb20" title="Perform a work cycle.">controller_work(controller *)</a></li>
<li><a class="el" href="structcontroller.html#ad40b4841d779853bbaf3254eea8bf464" title="Perform a work cycle and flush all buffers and transformations.">controller_finalize(controller *)</a> (advances controller to the <a class="el" href="structcontroller.html#final">final</a> or <a class="el" href="structcontroller.html#done">done</a> stage)</li>
<li><a class="el" href="structcontroller.html#a0b872d9d26cec2bf3d1c24f9abe4bb35" title="Get current controller stage.">controller_get_stage(controller *)</a></li>
<li><a class="el" href="structcontroller.html#ad6c7efe159c91333b704272de64065c8" title="Destroys &quot;this&quot; controller.">controller_destructor(controller *)</a></li>
</ul>
<h2><a class="anchor" id="final"></a>
final</h2>
<p>Final stage lasts from first invocation of <a class="el" href="structcontroller.html#ad40b4841d779853bbaf3254eea8bf464" title="Perform a work cycle and flush all buffers and transformations.">controller_finalize(controller *)</a> until <a class="el" href="structcontroller.html#ad40b4841d779853bbaf3254eea8bf464" title="Perform a work cycle and flush all buffers and transformations.">controller_finalize(controller *)</a> results in all data being processed and sent to the sink (i.e. no data is left in the buffers)</p>
<p>During this stage, buffers are flushed and transformations are finalized. If controller is on this stage, then there is no guarantee that all data is processed, as some of it may be left in the buffers.</p>
<p>The following methods can be called during this stage:</p><ul>
<li><a class="el" href="structcontroller.html#a6a977f95f1fcc10bd881f3b5d1e4a4e6" title="Sets data sink of a controller.">controller_set_sink(sink *, controller *)</a></li>
<li><a class="el" href="structcontroller.html#ad40b4841d779853bbaf3254eea8bf464" title="Perform a work cycle and flush all buffers and transformations.">controller_finalize(controller *)</a> (advances controller to the <a class="el" href="structcontroller.html#done">done</a> stage when all data was processed)</li>
<li><a class="el" href="structcontroller.html#a0b872d9d26cec2bf3d1c24f9abe4bb35" title="Get current controller stage.">controller_get_stage(controller *)</a></li>
<li><a class="el" href="structcontroller.html#ad6c7efe159c91333b704272de64065c8" title="Destroys &quot;this&quot; controller.">controller_destructor(controller *)</a></li>
</ul>
<h2><a class="anchor" id="done"></a>
done</h2>
<p>Done stage lasts from <a class="el" href="structcontroller.html#ad40b4841d779853bbaf3254eea8bf464" title="Perform a work cycle and flush all buffers and transformations.">controller_finalize(controller *)</a> results in all data being processed and sent to the sink (i.e. no data is left in the buffers) and until the object is destructed</p>
<p>If controller is on this stage, all of the data was successfully processed and object may be destroyed without any data loss.</p>
<p>The following methods can be called during this stage:</p><ul>
<li><a class="el" href="structcontroller.html#a0b872d9d26cec2bf3d1c24f9abe4bb35" title="Get current controller stage.">controller_get_stage(controller *)</a></li>
<li><a class="el" href="structcontroller.html#ad6c7efe159c91333b704272de64065c8" title="Destroys &quot;this&quot; controller.">controller_destructor(controller *)</a> </li>
</ul>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="af6f5a6ede5df13988faa6691d5c6e7a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6f5a6ede5df13988faa6691d5c6e7a2">&#9670;&nbsp;</a></span>controller_add_transformation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">controller_add_transformation </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtransformation.html">transformation</a> *&#160;</td>
          <td class="paramname"><em>transform</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcontroller.html">controller</a> *&#160;</td>
          <td class="paramname"><em>this</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds a transformation to the end of controller's transformation chain. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">transform</td><td>Pointer to the added transformation </td></tr>
    <tr><td class="paramname">this</td><td>Pointer to "this" controller object </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">ENOMEM</td><td>Failed to allocate memory for the buffer or transformation chain node</td></tr>
  </table>
  </dd>
</dl>
<p>Added transformation must satisfy all requirements of a <a class="el" href="structtransformation.html">transformation</a> object.</p>
<p>Any modifications of an added transformation that will alter the produced data in any way are only allowed when controller is on a <a class="el" href="structcontroller.html#build">build</a> stage. Modifications that do not alter the produced data in any way (including the ones that affect thrown exceptions type and frequency) are allowed on any stage.</p>
<p>Adding same transformation twice leads to an undefined behaviour.</p>
<p>This method shall only be called while controller is on a <a class="el" href="structcontroller.html#build">build</a> stage. </p>

</div>
</div>
<a id="a234aa9f2a8a767562191fdd825f90357"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a234aa9f2a8a767562191fdd825f90357">&#9670;&nbsp;</a></span>controller_constructor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">controller_constructor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcontroller.html">controller</a> *&#160;</td>
          <td class="paramname"><em>this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes "this" controller. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">this</td><td>Pointer to a controller to construct </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">ENOMEM</td><td>Failed to allocate memory for buffer</td></tr>
  </table>
  </dd>
</dl>
<p>Sets both source and sink of "this" controller to NULL, initializes a transformation chain with no transformations and creates a single buffer between source and sink.</p>
<p>Shall only be invoked for a newly allocated or destructed controller. </p>

</div>
</div>
<a id="ad6c7efe159c91333b704272de64065c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6c7efe159c91333b704272de64065c8">&#9670;&nbsp;</a></span>controller_destructor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">controller_destructor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcontroller.html">controller</a> *&#160;</td>
          <td class="paramname"><em>this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroys "this" controller. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">this</td><td>Pointer to a controller to destruct</td></tr>
  </table>
  </dd>
</dl>
<p>Destructs all buffers created by "this" controller, frees all memory allocated by "this" controller.</p>
<p>Does NOT destruct source, sink and added transformations. Destruction of those objects is user's responsibility. </p>

</div>
</div>
<a id="ad40b4841d779853bbaf3254eea8bf464"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad40b4841d779853bbaf3254eea8bf464">&#9670;&nbsp;</a></span>controller_finalize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">controller_finalize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcontroller.html">controller</a> *&#160;</td>
          <td class="paramname"><em>this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Perform a work cycle and flush all buffers and transformations. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">this</td><td>Pointer to "this" controller object </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">ENOMEM</td><td>Buffer reallocation failed </td></tr>
    <tr><td class="paramname">...</td><td>Any exception thrown by <a class="el" href="structsource.html#a3c7bd71dec47be37c1106b1800119442" title="Send next chunk of data to the sink buffer.">source_send(source *)</a> method of a provided data source </td></tr>
    <tr><td class="paramname">...</td><td>Any exception thrown by <a class="el" href="structtransformation.html#a63139e1054c4fd7c011557a50c024d4f" title="Receive next chunk of data from the source buffer, transform it, and sent so the sink buffer.">transformation_transform(transformation *)</a> method of any applied transformation </td></tr>
    <tr><td class="paramname">...</td><td>Any exception thrown by <a class="el" href="structtransformation.html#a1683897d5f13b4db295669267ba99101" title="Flush all data from transformation&#39;s internal buffers, and sent so the sink buffer.">transformation_finalize(transformation *)</a> method of any applied transformation </td></tr>
    <tr><td class="paramname">...</td><td>Any exception thrown by <a class="el" href="structsink.html#a21a887b7099aa09b8143e0aaacf52b79" title="Receive next chunk of data from the source buffer.">sink_send(sink *)</a> method of a provided data sink</td></tr>
  </table>
  </dd>
</dl>
<p>This method retrieves data from the source, transforms it with provided transformations and sends to the sink. Exact order of those operations is unspecified (i.e. it may process all data in a single chunk, or may split data across different chunks of a varying size for each transformation step).</p>
<p>When source reaches it's ending, controller flushes all buffers and finalizes all transformations (in order they are located from source to sink).</p>
<p>The process will continue until at least one of the following conditions is fulfilled:</p><ul>
<li>source is empty, all transformations are successfully finalized and sink received all the output data</li>
<li>sink is full (sink_end(sink *) returns true)</li>
<li>source, sink or any transformation throws an exception (in this case, basic exception guarantee is provided)</li>
</ul>
<p>If all buffers were successfully flushed, all transformations were successfully finalized and sink received all resulting data, "this" controller moves to the <a class="el" href="structcontroller.html#done">done</a> stage. If not,user may modify or replace sink in any required way, and then invoke this method again. In subsequent invocations, controller will start flushing from the point it left it the last time.</p>
<p>After this method has returned, user should check controller stage (via <a class="el" href="structcontroller.html#a0b872d9d26cec2bf3d1c24f9abe4bb35" title="Get current controller stage.">controller_get_stage(controller *)</a>) to check if process has finished, or if this method should be invoked again.</p>
<p>If both source and sink are not limited, calling this method results in an infinite loop (unless exception is thrown).</p>
<p>This method may be called on any controller's stage, except for <a class="el" href="structcontroller.html#done">done</a> stage.</p>
<p>If controller is on a <a class="el" href="structcontroller.html#build">build</a> stage, call to this method advances it into <a class="el" href="structcontroller.html#final">final</a> stage, skipping the <a class="el" href="structcontroller.html#work">work</a> stage. In that case, sink, source and desired transformations must be set beforehand with <a class="el" href="structcontroller.html#a4dd5793dcab8ee2fedba73c002215a0d" title="Sets data source of a controller.">controller_set_source(source *, controller *)</a>, <a class="el" href="structcontroller.html#a6a977f95f1fcc10bd881f3b5d1e4a4e6" title="Sets data sink of a controller.">controller_set_sink(sink *, controller *)</a> and <a class="el" href="structcontroller.html#af6f5a6ede5df13988faa6691d5c6e7a2" title="Adds a transformation to the end of controller&#39;s transformation chain.">controller_add_transformation(transformation *, controller *)</a> methods respectively.</p>
<p>If controller is on <a class="el" href="structcontroller.html#work">work</a> stage, call to this method advances it into <a class="el" href="structcontroller.html#final">final</a> stage.</p>
<p>If all data was successfully transformed and sent to sink, this method will advance controller to the <a class="el" href="structcontroller.html#done">done</a> stage regardless of it's current stage. </p>

</div>
</div>
<a id="a0b872d9d26cec2bf3d1c24f9abe4bb35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b872d9d26cec2bf3d1c24f9abe4bb35">&#9670;&nbsp;</a></span>controller_get_stage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">controller_get_stage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcontroller.html">controller</a> *&#160;</td>
          <td class="paramname"><em>this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get current controller stage. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">this</td><td>Pointer to "this" controller object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Current stage of a controller</dd></dl>
<p>For stage description refer to <a class="el" href="structcontroller.html#Stages">Stages</a> section of controller class </p>

</div>
</div>
<a id="a6a977f95f1fcc10bd881f3b5d1e4a4e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a977f95f1fcc10bd881f3b5d1e4a4e6">&#9670;&nbsp;</a></span>controller_set_sink()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">controller_set_sink </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsink.html">sink</a> *&#160;</td>
          <td class="paramname"><em>in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcontroller.html">controller</a> *&#160;</td>
          <td class="paramname"><em>this</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets data sink of a controller. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">in</td><td>Pointer to a sink to use </td></tr>
    <tr><td class="paramname">this</td><td>Pointer to "this" controller object</td></tr>
  </table>
  </dd>
</dl>
<p>Added sink must satisfy all requirements of a <a class="el" href="structsink.html">sink</a> object.</p>
<p>Added sink may be replaced or modified in any desired way when controller is any of it's stages stages except <a class="el" href="structcontroller.html#done">done</a>. </p>

</div>
</div>
<a id="a4dd5793dcab8ee2fedba73c002215a0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4dd5793dcab8ee2fedba73c002215a0d">&#9670;&nbsp;</a></span>controller_set_source()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">controller_set_source </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsource.html">source</a> *&#160;</td>
          <td class="paramname"><em>in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcontroller.html">controller</a> *&#160;</td>
          <td class="paramname"><em>this</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets data source of a controller. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">in</td><td>Pointer to a source to use </td></tr>
    <tr><td class="paramname">this</td><td>Pointer to "this" controller object</td></tr>
  </table>
  </dd>
</dl>
<p>Added source must satisfy all requirements of a <a class="el" href="structsource.html">source</a> object.</p>
<p>Added source may be replaced or modified in any desired way when controller is on <a class="el" href="structcontroller.html#build">build</a> or <a class="el" href="structcontroller.html#work">work</a> stages. Replacement or alteration of the source in any way that affects the produced data (including it's quantity) is not allowed on a <a class="el" href="structcontroller.html#final">final</a> stage.</p>
<p>This method shall only be called while controller is on a <a class="el" href="structcontroller.html#build">build</a> or <a class="el" href="structcontroller.html#work">work</a> stage. </p>

</div>
</div>
<a id="a78debcb43224e24c86bdb0ac72fdeb20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78debcb43224e24c86bdb0ac72fdeb20">&#9670;&nbsp;</a></span>controller_work()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">controller_work </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcontroller.html">controller</a> *&#160;</td>
          <td class="paramname"><em>this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Perform a work cycle. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">this</td><td>Pointer to "this" controller object </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">ENOMEM</td><td>Buffer reallocation failed </td></tr>
    <tr><td class="paramname">...</td><td>Any exception thrown by <a class="el" href="structsource.html#a3c7bd71dec47be37c1106b1800119442" title="Send next chunk of data to the sink buffer.">source_send(source *)</a> method of a provided data source </td></tr>
    <tr><td class="paramname">...</td><td>Any exception thrown by <a class="el" href="structtransformation.html#a63139e1054c4fd7c011557a50c024d4f" title="Receive next chunk of data from the source buffer, transform it, and sent so the sink buffer.">transformation_transform(transformation *)</a> method of any applied transformation </td></tr>
    <tr><td class="paramname">...</td><td>Any exception thrown by <a class="el" href="structsink.html#a21a887b7099aa09b8143e0aaacf52b79" title="Receive next chunk of data from the source buffer.">sink_send(sink *)</a> method of a provided data sink</td></tr>
  </table>
  </dd>
</dl>
<p>This method retrieves data from the source, transforms it with provided transformations and sends to the sink. Exact order of those operations is unspecified (i.e. it may process all data in a single chunk, or may split data across different chunks of a varying size for each transformation step).</p>
<p>The process will continue until at least one of the following conditions is fulfilled:</p><ul>
<li>source reaches it's end (source_end(source *) returns true)</li>
<li>sink is full (sink_end(sink *) returns true)</li>
<li>source, sink or any transformation throws an exception (in this case, basic exception guarantee is provided)</li>
</ul>
<p>If source or sink reaches it's end as a result of this operation, user may modify or replace them in any required way (although this condition is not a requirement, and modification of non finished sink and source is also allowed).</p>
<p>If both source and sink are not limited, calling this method results in an infinite loop (unless exception is thrown).</p>
<p>It is possible that nothing will be written into sink after this method is invoked. This may happens when source had no data or all data was spread across controller's buffers. It is not an error situation, if this behaviour is undesired, use <a class="el" href="structcontroller.html#ad40b4841d779853bbaf3254eea8bf464" title="Perform a work cycle and flush all buffers and transformations.">controller_finalize(controller *)</a> method instead.</p>
<p>This method shall only be called while controller is on either <a class="el" href="structcontroller.html#build">build</a> or <a class="el" href="structcontroller.html#work">work</a> stage.</p>
<p>If controller is on a <a class="el" href="structcontroller.html#build">build</a> stage, call to this method advances it into <a class="el" href="structcontroller.html#work">work</a> stage. In that case, sink, source and desired transformations must be set beforehand with <a class="el" href="structcontroller.html#a4dd5793dcab8ee2fedba73c002215a0d" title="Sets data source of a controller.">controller_set_source(source *, controller *)</a>, <a class="el" href="structcontroller.html#a6a977f95f1fcc10bd881f3b5d1e4a4e6" title="Sets data sink of a controller.">controller_set_sink(sink *, controller *)</a> and <a class="el" href="structcontroller.html#af6f5a6ede5df13988faa6691d5c6e7a2" title="Adds a transformation to the end of controller&#39;s transformation chain.">controller_add_transformation(transformation *, controller *)</a> methods respectively. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="controller_8h_source.html">controller.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.16
</small></address>
</body>
</html>
